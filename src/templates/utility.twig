<h2>{{ 'Warm Caches'|t('cachewarmer') }}</h2>

{% if total_urls > 0 %}
	<p>Ready to warm up caches :</p>

	{% for site in sites %}
		<p style="margin-bottom:0;margin-top:0.3rem">{{ site.name }} : {% if urls[site.id] is defined %} {{ urls[site.id]|length }} {% else %} 0 {% endif %} urls</p>
	{% endfor %}
	<br/>

	<button type="submit" class="btn submit secondary warmthemup">{{ 'Warm them'|t('cachewarmer') }}</button>

	<div id="cachewarmer-modal" class="modal" style="display:none">
		<div class="body">
			<h2>{{ 'Crawling urls...'|t('cachewarmer') }}</h2>
			<div class="progressBar">
				<div class="progress"></div>
			</div>
			<div class="progressNumbers centeralign">
				<span class="current">0</span> / {{ total_urls }}
			</div>
			<div class="results"></div>
		</div>
		<div class="footer">
			<div class="buttons right first">
				<button class="btn close">{{ 'Close'|t('cachewarmer') }}</button>
			</div>
		</div>
	</div>
{% else %}

	<p>{{ 'There are no urls defined in your sitemaps, check the following :'|t('cachewarmer') }}</p>
	<ul>
		<li class="cachewarmer-li">{{ 'Your have enabled at least one site in the {tag}settings{endtag}'|t('cachewarmer', {tag: '<a href="'~url('settings/plugins/cachewarmer')~'">', endtag: '</a>'})|raw }}</li>
		<li class="cachewarmer-li">{{ 'Your sitemaps are accessible through internet and contain urls'|t('cachewarmer') }}</li>
	</ul>

{% endif %}

{% css %}
	.cachewarmer-li {
		list-style: disc;
		margin-left: 15px;
	}
	#cachewarmer-modal .body {
		min-height: calc(100% - 62px);
	}
	#cachewarmer-modal .progressBar{
		width: 100%;
		height: 5px;
		border: 1px solid #3f4d5a;
		border-radius: 4px;
		overflow: hidden;
		margin-top: 30px;
	}
	#cachewarmer-modal .progressBar .progress{
		width: 0;
		background: #E12D39;
		height: 5px;
		transition: 0.2s width;
	}
	#cachewarmer-modal .progressNumbers {
		font-size: 16px;
		margin-top: 10px;
	}
{% endcss %}
{% js %}
	var max_execution_time = {{ max_execution_time }};
	var total_urls = {{ total_urls }};
{% endjs %}
